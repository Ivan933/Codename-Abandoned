<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (keep existing meta tags and other head content) ... -->

    <style>
        /* ... (keep existing styles) ... */

        /* Updated Preloader Styling */
        #preloadContainer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }

        #preloadContainer img {
            max-width: 200px;
            max-height: 200px;
            margin-bottom: 30px;
        }

        /* Updated Wallet Button Styling */
        #wallet-button {
            position: relative;
            padding: 15px 30px;
            background-color: #f6851b; /* MetaMask orange */
            color: white;
            border: none;
            border-radius: 8px;
            font-family: 'Arial', sans-serif;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, background-color 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        #wallet-button:hover {
            transform: translateY(-2px);
            background-color: #ff9500;
        }

        #wallet-button:active {
            transform: translateY(0);
        }

        .wallet-prompt {
            color: white;
            font-size: 1.5em;
            margin-bottom: 20px;
            text-align: center;
            padding: 0 20px;
        }
    </style>
</head>
<body onload="onLoad()">
    <!-- Preloader -->
    <div id="preloadContainer">
        <img src="loading/HTMLImage_D852ACBA_C9D9_4C69_41C0_1FC9A930EF8A.gif" alt="Loading...">
        <p class="wallet-prompt">Connect your MetaMask wallet to access the virtual tour</p>
        <button id="wallet-button">Connect Wallet</button>
    </div>

    <!-- ... (keep existing viewer div) ... -->

    <script>
        // ... (keep existing variable declarations) ... 

        function onLoad() {
            initializeWalletButton();
        }

        function initializeWalletButton() {
            const walletButton = document.getElementById('wallet-button');
            walletButton.onclick = handleWalletConnection;
            
            // Auto-detect MetaMask availability
            if (typeof window.ethereum === 'undefined') {
                walletButton.disabled = true;
                walletButton.textContent = 'MetaMask Not Detected';
                showError('Please install MetaMask to continue');
            }
        }

        async function handleWalletConnection() {
            try {
                // Check if MetaMask is installed
                if (typeof window.ethereum === 'undefined') {
                    throw new Error('MetaMask not installed');
                }

                // Request account access
                const accounts = await window.ethereum.request({ 
                    method: 'eth_requestAccounts' 
                });

                // Verify connection
                if (!accounts || accounts.length === 0) {
                    throw new Error('No accounts found');
                }

                // Successful connection
                console.log('Connected account:', accounts[0]);
                showWalletAddress(accounts[0]);
                initializeTour();

            } catch (error) {
                console.error('Connection error:', error);
                showError(`Connection failed: ${error.message}`);
            }
        }

        function showWalletAddress(address) {
            const walletInfo = document.createElement('div');
            walletInfo.id

